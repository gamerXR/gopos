{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.tsx\"; // Backend URL with fallback for APK builds\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL || 'https://resto-pos-hub-2.preview.emergentagent.com';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (phone, password) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/login`, {\n          phone,\n          password\n        });\n        const {\n          token: newToken,\n          user: newUser\n        } = response.data;\n        await AsyncStorage.default.setItem('token', newToken);\n        await AsyncStorage.default.setItem('user', JSON.stringify(newUser));\n        setToken(newToken);\n        setUser(newUser);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('token');\n      await AsyncStorage.default.removeItem('user');\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        logout,\n        isLoading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":102,"map":[[4,62,5,0],[5,2,5,0,"Object"],[5,8,5,0],[5,9,5,0,"defineProperty"],[5,23,5,0],[5,24,5,0,"exports"],[5,31,5,0],[6,4,5,0,"value"],[6,9,5,0],[7,2,5,0],[8,2,5,0],[8,11,5,0,"_interopDefault"],[8,27,5,0,"e"],[8,28,5,0],[9,4,5,0],[9,11,5,0,"e"],[9,12,5,0],[9,16,5,0,"e"],[9,17,5,0],[9,18,5,0,"__esModule"],[9,28,5,0],[9,31,5,0,"e"],[9,32,5,0],[10,6,5,0,"default"],[10,13,5,0],[10,15,5,0,"e"],[11,4,5,0],[12,2,5,0],[13,2,27,0,"Object"],[13,8,27,0],[13,9,27,0,"defineProperty"],[13,23,27,0],[13,24,27,0,"exports"],[13,31,27,0],[14,4,27,0,"enumerable"],[14,14,27,0],[15,4,27,0,"get"],[15,7,27,0],[15,18,27,0,"get"],[15,19,27,0],[16,6,27,0],[16,13,27,0,"AuthProvider"],[16,25,27,0],[17,4,27,0],[18,2,27,0],[19,2,85,0,"Object"],[19,8,85,0],[19,9,85,0,"defineProperty"],[19,23,85,0],[19,24,85,0,"exports"],[19,31,85,0],[20,4,85,0,"enumerable"],[20,14,85,0],[21,4,85,0,"get"],[21,7,85,0],[21,18,85,0,"get"],[21,19,85,0],[22,6,85,0],[22,13,85,0,"useAuth"],[22,20,85,0],[23,4,85,0],[24,2,85,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_axios"],[28,12,3,0],[28,15,3,0,"require"],[28,22,3,0],[28,23,3,0,"_dependencyMap"],[28,37,3,0],[29,2,3,0],[29,6,3,0,"axios"],[29,11,3,0],[29,14,3,0,"_interopDefault"],[29,29,3,0],[29,30,3,0,"_axios"],[29,36,3,0],[30,2,3,26],[30,6,3,26,"_reactJsxDevRuntime"],[30,25,3,26],[30,28,3,26,"require"],[30,35,3,26],[30,36,3,26,"_dependencyMap"],[30,50,3,26],[31,2,6,0],[31,8,6,6,"BACKEND_URL"],[31,19,6,17],[31,22,6,20,"process"],[31,29,6,27],[31,30,6,28,"env"],[31,33,6,31],[31,34,6,32,"EXPO_PUBLIC_BACKEND_URL"],[31,57,6,55],[31,61,6,59],[31,112,6,110],[32,2,25,0],[32,8,25,6,"AuthContext"],[32,19,25,17],[32,35,25,20],[32,39,25,20,"createContext"],[32,45,25,33],[32,46,25,33,"createContext"],[32,59,25,33],[32,61,25,63,"undefined"],[32,70,25,72],[32,71,25,73],[33,2,27,7],[33,8,27,13,"AuthProvider"],[33,20,27,66],[33,23,27,69,"AuthProvider"],[33,24,27,70],[34,4,27,72,"children"],[35,2,27,81],[35,3,27,82],[35,8,27,87],[36,4,28,2],[36,10,28,8],[36,11,28,9,"user"],[36,15,28,13],[36,17,28,15,"setUser"],[36,24,28,22],[36,25,28,23],[36,28,28,26],[36,32,28,26,"useState"],[36,38,28,34],[36,39,28,34,"useState"],[36,47,28,34],[36,49,28,48],[36,53,28,52],[36,54,28,53],[37,4,29,2],[37,10,29,8],[37,11,29,9,"token"],[37,16,29,14],[37,18,29,16,"setToken"],[37,26,29,24],[37,27,29,25],[37,30,29,28],[37,34,29,28,"useState"],[37,40,29,36],[37,41,29,36,"useState"],[37,49,29,36],[37,51,29,52],[37,55,29,56],[37,56,29,57],[38,4,30,2],[38,10,30,8],[38,11,30,9,"isLoading"],[38,20,30,18],[38,22,30,20,"setIsLoading"],[38,34,30,32],[38,35,30,33],[38,38,30,36],[38,42,30,36,"useState"],[38,48,30,44],[38,49,30,44,"useState"],[38,57,30,44],[38,59,30,45],[38,63,30,49],[38,64,30,50],[39,4,32,2],[39,8,32,2,"useEffect"],[39,14,32,11],[39,15,32,11,"useEffect"],[39,24,32,11],[39,26,32,12],[39,32,32,18],[40,6,33,4,"loadStoredAuth"],[40,20,33,18],[40,21,33,19],[40,22,33,20],[41,4,34,2],[41,5,34,3],[41,7,34,5],[41,9,34,7],[41,10,34,8],[42,4,36,2],[42,10,36,8,"loadStoredAuth"],[42,24,36,22],[42,27,36,25],[42,33,36,25,"loadStoredAuth"],[42,34,36,25],[42,39,36,37],[43,6,37,4],[43,10,37,8],[44,8,38,6],[44,14,38,12,"storedToken"],[44,25,38,23],[44,28,38,26],[44,34,38,32,"AsyncStorage"],[44,46,38,44],[44,47,38,44,"default"],[44,54,38,44],[44,55,38,45,"getItem"],[44,62,38,52],[44,63,38,53],[44,70,38,60],[44,71,38,61],[45,8,39,6],[45,14,39,12,"storedUser"],[45,24,39,22],[45,27,39,25],[45,33,39,31,"AsyncStorage"],[45,45,39,43],[45,46,39,43,"default"],[45,53,39,43],[45,54,39,44,"getItem"],[45,61,39,51],[45,62,39,52],[45,68,39,58],[45,69,39,59],[46,8,41,6],[46,12,41,10,"storedToken"],[46,23,41,21],[46,27,41,25,"storedUser"],[46,37,41,35],[46,39,41,37],[47,10,42,8,"setToken"],[47,18,42,16],[47,19,42,17,"storedToken"],[47,30,42,28],[47,31,42,29],[48,10,43,8,"setUser"],[48,17,43,15],[48,18,43,16,"JSON"],[48,22,43,20],[48,23,43,21,"parse"],[48,28,43,26],[48,29,43,27,"storedUser"],[48,39,43,37],[48,40,43,38],[48,41,43,39],[49,8,44,6],[50,6,45,4],[50,7,45,5],[50,8,45,6],[50,15,45,13,"error"],[50,20,45,18],[50,22,45,20],[51,8,46,6,"console"],[51,15,46,13],[51,16,46,14,"error"],[51,21,46,19],[51,22,46,20],[51,43,46,41],[51,45,46,43,"error"],[51,50,46,48],[51,51,46,49],[52,6,47,4],[52,7,47,5],[52,16,47,14],[53,8,48,6,"setIsLoading"],[53,20,48,18],[53,21,48,19],[53,26,48,24],[53,27,48,25],[54,6,49,4],[55,4,50,2],[55,5,50,3],[56,4,52,2],[56,10,52,8,"login"],[56,15,52,13],[56,18,52,16],[56,24,52,16,"login"],[56,25,52,23,"phone"],[56,30,52,36],[56,32,52,38,"password"],[56,40,52,54],[56,45,52,59],[57,6,53,4],[57,10,53,8],[58,8,54,6],[58,14,54,12,"response"],[58,22,54,20],[58,25,54,23],[58,31,54,29,"axios"],[58,36,54,34],[58,37,54,34,"default"],[58,44,54,34],[58,45,54,35,"post"],[58,49,54,39],[58,50,54,40],[58,53,54,43,"BACKEND_URL"],[58,64,54,54],[58,76,54,66],[58,78,54,68],[59,10,55,8,"phone"],[59,15,55,13],[60,10,56,8,"password"],[61,8,57,6],[61,9,57,7],[61,10,57,8],[62,8,59,6],[62,14,59,12],[63,10,59,14,"token"],[63,15,59,19],[63,17,59,21,"newToken"],[63,25,59,29],[64,10,59,31,"user"],[64,14,59,35],[64,16,59,37,"newUser"],[65,8,59,45],[65,9,59,46],[65,12,59,49,"response"],[65,20,59,57],[65,21,59,58,"data"],[65,25,59,62],[66,8,61,6],[66,14,61,12,"AsyncStorage"],[66,26,61,24],[66,27,61,24,"default"],[66,34,61,24],[66,35,61,25,"setItem"],[66,42,61,32],[66,43,61,33],[66,50,61,40],[66,52,61,42,"newToken"],[66,60,61,50],[66,61,61,51],[67,8,62,6],[67,14,62,12,"AsyncStorage"],[67,26,62,24],[67,27,62,24,"default"],[67,34,62,24],[67,35,62,25,"setItem"],[67,42,62,32],[67,43,62,33],[67,49,62,39],[67,51,62,41,"JSON"],[67,55,62,45],[67,56,62,46,"stringify"],[67,65,62,55],[67,66,62,56,"newUser"],[67,73,62,63],[67,74,62,64],[67,75,62,65],[68,8,64,6,"setToken"],[68,16,64,14],[68,17,64,15,"newToken"],[68,25,64,23],[68,26,64,24],[69,8,65,6,"setUser"],[69,15,65,13],[69,16,65,14,"newUser"],[69,23,65,21],[69,24,65,22],[70,6,66,4],[70,7,66,5],[70,8,66,6],[70,15,66,13,"error"],[70,20,66,23],[70,22,66,25],[71,8,67,6],[71,14,67,12],[71,18,67,16,"Error"],[71,23,67,21],[71,24,67,22,"error"],[71,29,67,27],[71,30,67,28,"response"],[71,38,67,36],[71,40,67,38,"data"],[71,44,67,42],[71,46,67,44,"detail"],[71,52,67,50],[71,56,67,54],[71,70,67,68],[71,71,67,69],[72,6,68,4],[73,4,69,2],[73,5,69,3],[74,4,71,2],[74,10,71,8,"logout"],[74,16,71,14],[74,19,71,17],[74,25,71,17,"logout"],[74,26,71,17],[74,31,71,29],[75,6,72,4],[75,12,72,10,"AsyncStorage"],[75,24,72,22],[75,25,72,22,"default"],[75,32,72,22],[75,33,72,23,"removeItem"],[75,43,72,33],[75,44,72,34],[75,51,72,41],[75,52,72,42],[76,6,73,4],[76,12,73,10,"AsyncStorage"],[76,24,73,22],[76,25,73,22,"default"],[76,32,73,22],[76,33,73,23,"removeItem"],[76,43,73,33],[76,44,73,34],[76,50,73,40],[76,51,73,41],[77,6,74,4,"setToken"],[77,14,74,12],[77,15,74,13],[77,19,74,17],[77,20,74,18],[78,6,75,4,"setUser"],[78,13,75,11],[78,14,75,12],[78,18,75,16],[78,19,75,17],[79,4,76,2],[79,5,76,3],[80,4,78,2],[80,24,79,4],[80,28,79,4,"_reactJsxDevRuntime"],[80,47,79,4],[80,48,79,4,"jsxDEV"],[80,54,79,4],[80,56,79,5,"AuthContext"],[80,67,79,16],[80,68,79,17,"Provider"],[80,76,79,25],[81,6,79,26,"value"],[81,11,79,31],[81,13,79,33],[82,8,79,35,"user"],[82,12,79,39],[83,8,79,41,"token"],[83,13,79,46],[84,8,79,48,"login"],[84,13,79,53],[85,8,79,55,"logout"],[85,14,79,61],[86,8,79,63,"isLoading"],[87,6,79,73],[87,7,79,75],[88,6,79,75,"children"],[88,14,79,75],[88,16,80,7,"children"],[89,4,80,15],[90,6,80,15,"fileName"],[90,14,80,15],[90,16,80,15,"_jsxFileName"],[90,28,80,15],[91,6,80,15,"lineNumber"],[91,16,80,15],[92,6,80,15,"columnNumber"],[92,18,80,15],[93,4,80,15],[93,11,81,26],[93,12,81,27],[94,2,83,0],[94,3,83,1],[95,2,85,7],[95,8,85,13,"useAuth"],[95,15,85,20],[95,18,85,23,"useAuth"],[95,19,85,23],[95,24,85,29],[96,4,86,2],[96,10,86,8,"context"],[96,17,86,15],[96,20,86,18],[96,24,86,18,"useContext"],[96,30,86,28],[96,31,86,28,"useContext"],[96,41,86,28],[96,43,86,29,"AuthContext"],[96,54,86,40],[96,55,86,41],[97,4,87,2],[97,8,87,6],[97,9,87,7,"context"],[97,16,87,14],[97,18,87,16],[98,6,88,4],[98,12,88,10],[98,16,88,14,"Error"],[98,21,88,19],[98,22,88,20],[98,64,88,62],[98,65,88,63],[99,4,89,2],[100,4,90,2],[100,11,90,9,"context"],[100,18,90,16],[101,2,91,0],[101,3,91,1],[102,0,91,2],[102,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","logout","useAuth"],"mappings":"AAA;qEC0B;YCK;GDE;yBEE;GFc;gBGE;GHiB;iBIE;GJK;CDO;uBME;CNM"},"hasCjsExports":false},"type":"js/module"}]}