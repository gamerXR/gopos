{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.tsx\"; // Backend URL - with fallback for production APK builds\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL || 'https://pos-foodbev.emergent.host';\n\n  // Log for debugging (removed in production)\n  if (__DEV__) {\n    console.log('Backend URL:', BACKEND_URL);\n  }\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (phone, password) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/login`, {\n          phone,\n          password\n        });\n        const {\n          token: newToken,\n          user: newUser\n        } = response.data;\n        await AsyncStorage.default.setItem('token', newToken);\n        await AsyncStorage.default.setItem('user', JSON.stringify(newUser));\n        setToken(newToken);\n        setUser(newUser);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('token');\n      await AsyncStorage.default.removeItem('user');\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        logout,\n        isLoading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":107,"map":[[4,62,5,0],[5,2,5,0,"Object"],[5,8,5,0],[5,9,5,0,"defineProperty"],[5,23,5,0],[5,24,5,0,"exports"],[5,31,5,0],[6,4,5,0,"value"],[6,9,5,0],[7,2,5,0],[8,2,5,0],[8,11,5,0,"_interopDefault"],[8,27,5,0,"e"],[8,28,5,0],[9,4,5,0],[9,11,5,0,"e"],[9,12,5,0],[9,16,5,0,"e"],[9,17,5,0],[9,18,5,0,"__esModule"],[9,28,5,0],[9,31,5,0,"e"],[9,32,5,0],[10,6,5,0,"default"],[10,13,5,0],[10,15,5,0,"e"],[11,4,5,0],[12,2,5,0],[13,2,32,0,"Object"],[13,8,32,0],[13,9,32,0,"defineProperty"],[13,23,32,0],[13,24,32,0,"exports"],[13,31,32,0],[14,4,32,0,"enumerable"],[14,14,32,0],[15,4,32,0,"get"],[15,7,32,0],[15,18,32,0,"get"],[15,19,32,0],[16,6,32,0],[16,13,32,0,"AuthProvider"],[16,25,32,0],[17,4,32,0],[18,2,32,0],[19,2,90,0,"Object"],[19,8,90,0],[19,9,90,0,"defineProperty"],[19,23,90,0],[19,24,90,0,"exports"],[19,31,90,0],[20,4,90,0,"enumerable"],[20,14,90,0],[21,4,90,0,"get"],[21,7,90,0],[21,18,90,0,"get"],[21,19,90,0],[22,6,90,0],[22,13,90,0,"useAuth"],[22,20,90,0],[23,4,90,0],[24,2,90,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_axios"],[28,12,3,0],[28,15,3,0,"require"],[28,22,3,0],[28,23,3,0,"_dependencyMap"],[28,37,3,0],[29,2,3,0],[29,6,3,0,"axios"],[29,11,3,0],[29,14,3,0,"_interopDefault"],[29,29,3,0],[29,30,3,0,"_axios"],[29,36,3,0],[30,2,3,26],[30,6,3,26,"_reactJsxDevRuntime"],[30,25,3,26],[30,28,3,26,"require"],[30,35,3,26],[30,36,3,26,"_dependencyMap"],[30,50,3,26],[31,2,6,0],[31,8,6,6,"BACKEND_URL"],[31,19,6,17],[31,22,6,20,"process"],[31,29,6,27],[31,30,6,28,"env"],[31,33,6,31],[31,34,6,32,"EXPO_PUBLIC_BACKEND_URL"],[31,57,6,55],[31,61,6,59],[31,96,6,94],[33,2,8,0],[34,2,9,0],[34,6,9,4,"__DEV__"],[34,13,9,11],[34,15,9,13],[35,4,10,2,"console"],[35,11,10,9],[35,12,10,10,"log"],[35,15,10,13],[35,16,10,14],[35,30,10,28],[35,32,10,30,"BACKEND_URL"],[35,43,10,41],[35,44,10,42],[36,2,11,0],[37,2,30,0],[37,8,30,6,"AuthContext"],[37,19,30,17],[37,35,30,20],[37,39,30,20,"createContext"],[37,45,30,33],[37,46,30,33,"createContext"],[37,59,30,33],[37,61,30,63,"undefined"],[37,70,30,72],[37,71,30,73],[38,2,32,7],[38,8,32,13,"AuthProvider"],[38,20,32,66],[38,23,32,69,"AuthProvider"],[38,24,32,70],[39,4,32,72,"children"],[40,2,32,81],[40,3,32,82],[40,8,32,87],[41,4,33,2],[41,10,33,8],[41,11,33,9,"user"],[41,15,33,13],[41,17,33,15,"setUser"],[41,24,33,22],[41,25,33,23],[41,28,33,26],[41,32,33,26,"useState"],[41,38,33,34],[41,39,33,34,"useState"],[41,47,33,34],[41,49,33,48],[41,53,33,52],[41,54,33,53],[42,4,34,2],[42,10,34,8],[42,11,34,9,"token"],[42,16,34,14],[42,18,34,16,"setToken"],[42,26,34,24],[42,27,34,25],[42,30,34,28],[42,34,34,28,"useState"],[42,40,34,36],[42,41,34,36,"useState"],[42,49,34,36],[42,51,34,52],[42,55,34,56],[42,56,34,57],[43,4,35,2],[43,10,35,8],[43,11,35,9,"isLoading"],[43,20,35,18],[43,22,35,20,"setIsLoading"],[43,34,35,32],[43,35,35,33],[43,38,35,36],[43,42,35,36,"useState"],[43,48,35,44],[43,49,35,44,"useState"],[43,57,35,44],[43,59,35,45],[43,63,35,49],[43,64,35,50],[44,4,37,2],[44,8,37,2,"useEffect"],[44,14,37,11],[44,15,37,11,"useEffect"],[44,24,37,11],[44,26,37,12],[44,32,37,18],[45,6,38,4,"loadStoredAuth"],[45,20,38,18],[45,21,38,19],[45,22,38,20],[46,4,39,2],[46,5,39,3],[46,7,39,5],[46,9,39,7],[46,10,39,8],[47,4,41,2],[47,10,41,8,"loadStoredAuth"],[47,24,41,22],[47,27,41,25],[47,33,41,25,"loadStoredAuth"],[47,34,41,25],[47,39,41,37],[48,6,42,4],[48,10,42,8],[49,8,43,6],[49,14,43,12,"storedToken"],[49,25,43,23],[49,28,43,26],[49,34,43,32,"AsyncStorage"],[49,46,43,44],[49,47,43,44,"default"],[49,54,43,44],[49,55,43,45,"getItem"],[49,62,43,52],[49,63,43,53],[49,70,43,60],[49,71,43,61],[50,8,44,6],[50,14,44,12,"storedUser"],[50,24,44,22],[50,27,44,25],[50,33,44,31,"AsyncStorage"],[50,45,44,43],[50,46,44,43,"default"],[50,53,44,43],[50,54,44,44,"getItem"],[50,61,44,51],[50,62,44,52],[50,68,44,58],[50,69,44,59],[51,8,46,6],[51,12,46,10,"storedToken"],[51,23,46,21],[51,27,46,25,"storedUser"],[51,37,46,35],[51,39,46,37],[52,10,47,8,"setToken"],[52,18,47,16],[52,19,47,17,"storedToken"],[52,30,47,28],[52,31,47,29],[53,10,48,8,"setUser"],[53,17,48,15],[53,18,48,16,"JSON"],[53,22,48,20],[53,23,48,21,"parse"],[53,28,48,26],[53,29,48,27,"storedUser"],[53,39,48,37],[53,40,48,38],[53,41,48,39],[54,8,49,6],[55,6,50,4],[55,7,50,5],[55,8,50,6],[55,15,50,13,"error"],[55,20,50,18],[55,22,50,20],[56,8,51,6,"console"],[56,15,51,13],[56,16,51,14,"error"],[56,21,51,19],[56,22,51,20],[56,43,51,41],[56,45,51,43,"error"],[56,50,51,48],[56,51,51,49],[57,6,52,4],[57,7,52,5],[57,16,52,14],[58,8,53,6,"setIsLoading"],[58,20,53,18],[58,21,53,19],[58,26,53,24],[58,27,53,25],[59,6,54,4],[60,4,55,2],[60,5,55,3],[61,4,57,2],[61,10,57,8,"login"],[61,15,57,13],[61,18,57,16],[61,24,57,16,"login"],[61,25,57,23,"phone"],[61,30,57,36],[61,32,57,38,"password"],[61,40,57,54],[61,45,57,59],[62,6,58,4],[62,10,58,8],[63,8,59,6],[63,14,59,12,"response"],[63,22,59,20],[63,25,59,23],[63,31,59,29,"axios"],[63,36,59,34],[63,37,59,34,"default"],[63,44,59,34],[63,45,59,35,"post"],[63,49,59,39],[63,50,59,40],[63,53,59,43,"BACKEND_URL"],[63,64,59,54],[63,76,59,66],[63,78,59,68],[64,10,60,8,"phone"],[64,15,60,13],[65,10,61,8,"password"],[66,8,62,6],[66,9,62,7],[66,10,62,8],[67,8,64,6],[67,14,64,12],[68,10,64,14,"token"],[68,15,64,19],[68,17,64,21,"newToken"],[68,25,64,29],[69,10,64,31,"user"],[69,14,64,35],[69,16,64,37,"newUser"],[70,8,64,45],[70,9,64,46],[70,12,64,49,"response"],[70,20,64,57],[70,21,64,58,"data"],[70,25,64,62],[71,8,66,6],[71,14,66,12,"AsyncStorage"],[71,26,66,24],[71,27,66,24,"default"],[71,34,66,24],[71,35,66,25,"setItem"],[71,42,66,32],[71,43,66,33],[71,50,66,40],[71,52,66,42,"newToken"],[71,60,66,50],[71,61,66,51],[72,8,67,6],[72,14,67,12,"AsyncStorage"],[72,26,67,24],[72,27,67,24,"default"],[72,34,67,24],[72,35,67,25,"setItem"],[72,42,67,32],[72,43,67,33],[72,49,67,39],[72,51,67,41,"JSON"],[72,55,67,45],[72,56,67,46,"stringify"],[72,65,67,55],[72,66,67,56,"newUser"],[72,73,67,63],[72,74,67,64],[72,75,67,65],[73,8,69,6,"setToken"],[73,16,69,14],[73,17,69,15,"newToken"],[73,25,69,23],[73,26,69,24],[74,8,70,6,"setUser"],[74,15,70,13],[74,16,70,14,"newUser"],[74,23,70,21],[74,24,70,22],[75,6,71,4],[75,7,71,5],[75,8,71,6],[75,15,71,13,"error"],[75,20,71,23],[75,22,71,25],[76,8,72,6],[76,14,72,12],[76,18,72,16,"Error"],[76,23,72,21],[76,24,72,22,"error"],[76,29,72,27],[76,30,72,28,"response"],[76,38,72,36],[76,40,72,38,"data"],[76,44,72,42],[76,46,72,44,"detail"],[76,52,72,50],[76,56,72,54],[76,70,72,68],[76,71,72,69],[77,6,73,4],[78,4,74,2],[78,5,74,3],[79,4,76,2],[79,10,76,8,"logout"],[79,16,76,14],[79,19,76,17],[79,25,76,17,"logout"],[79,26,76,17],[79,31,76,29],[80,6,77,4],[80,12,77,10,"AsyncStorage"],[80,24,77,22],[80,25,77,22,"default"],[80,32,77,22],[80,33,77,23,"removeItem"],[80,43,77,33],[80,44,77,34],[80,51,77,41],[80,52,77,42],[81,6,78,4],[81,12,78,10,"AsyncStorage"],[81,24,78,22],[81,25,78,22,"default"],[81,32,78,22],[81,33,78,23,"removeItem"],[81,43,78,33],[81,44,78,34],[81,50,78,40],[81,51,78,41],[82,6,79,4,"setToken"],[82,14,79,12],[82,15,79,13],[82,19,79,17],[82,20,79,18],[83,6,80,4,"setUser"],[83,13,80,11],[83,14,80,12],[83,18,80,16],[83,19,80,17],[84,4,81,2],[84,5,81,3],[85,4,83,2],[85,24,84,4],[85,28,84,4,"_reactJsxDevRuntime"],[85,47,84,4],[85,48,84,4,"jsxDEV"],[85,54,84,4],[85,56,84,5,"AuthContext"],[85,67,84,16],[85,68,84,17,"Provider"],[85,76,84,25],[86,6,84,26,"value"],[86,11,84,31],[86,13,84,33],[87,8,84,35,"user"],[87,12,84,39],[88,8,84,41,"token"],[88,13,84,46],[89,8,84,48,"login"],[89,13,84,53],[90,8,84,55,"logout"],[90,14,84,61],[91,8,84,63,"isLoading"],[92,6,84,73],[92,7,84,75],[93,6,84,75,"children"],[93,14,84,75],[93,16,85,7,"children"],[94,4,85,15],[95,6,85,15,"fileName"],[95,14,85,15],[95,16,85,15,"_jsxFileName"],[95,28,85,15],[96,6,85,15,"lineNumber"],[96,16,85,15],[97,6,85,15,"columnNumber"],[97,18,85,15],[98,4,85,15],[98,11,86,26],[98,12,86,27],[99,2,88,0],[99,3,88,1],[100,2,90,7],[100,8,90,13,"useAuth"],[100,15,90,20],[100,18,90,23,"useAuth"],[100,19,90,23],[100,24,90,29],[101,4,91,2],[101,10,91,8,"context"],[101,17,91,15],[101,20,91,18],[101,24,91,18,"useContext"],[101,30,91,28],[101,31,91,28,"useContext"],[101,41,91,28],[101,43,91,29,"AuthContext"],[101,54,91,40],[101,55,91,41],[102,4,92,2],[102,8,92,6],[102,9,92,7,"context"],[102,16,92,14],[102,18,92,16],[103,6,93,4],[103,12,93,10],[103,16,93,14,"Error"],[103,21,93,19],[103,22,93,20],[103,64,93,62],[103,65,93,63],[104,4,94,2],[105,4,95,2],[105,11,95,9,"context"],[105,18,95,16],[106,2,96,0],[106,3,96,1],[107,0,96,2],[107,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","logout","useAuth"],"mappings":"AAA;qEC+B;YCK;GDE;yBEE;GFc;gBGE;GHiB;iBIE;GJK;CDO;uBME;CNM"},"hasCjsExports":false},"type":"js/module"}]}