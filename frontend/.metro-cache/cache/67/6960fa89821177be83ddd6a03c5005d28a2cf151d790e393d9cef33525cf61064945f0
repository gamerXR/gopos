{"dependencies":[{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":31,"index":46}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"./DeprecatedNavigationInChildContext.js","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":0,"index":47},"end":{"line":4,"column":93,"index":140}}],"key":"G2HDOvDBOQWj5sp0I8taZ1FI8pc="}},{"name":"./NavigationBuilderContext.js","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":141},"end":{"line":5,"column":73,"index":214}}],"key":"wXMcIJWUD66R6uBdlKglbjBdJPs="}},{"name":"./useOnPreventRemove.js","data":{"asyncType":null,"locs":[{"start":{"line":6,"column":0,"index":215},"end":{"line":6,"column":82,"index":297}}],"key":"/2VXR8Y1tGU+6o/Dg+CkxymFKpY="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useOnAction = useOnAction;\n  var React = _interopRequireWildcard(require(_dependencyMap[0], \"react\"));\n  var _DeprecatedNavigationInChildContext = require(_dependencyMap[1], \"./DeprecatedNavigationInChildContext.js\");\n  var _NavigationBuilderContext = require(_dependencyMap[2], \"./NavigationBuilderContext.js\");\n  var _useOnPreventRemove = require(_dependencyMap[3], \"./useOnPreventRemove.js\");\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) \"default\" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }\n  /**\n   * Hook to handle actions for a navigator, including state updates and bubbling.\n   *\n   * Bubbling an action is achieved in 2 ways:\n   * 1. To bubble action to parent, we expose the action handler in context and then access the parent context\n   * 2. To bubble action to child, child adds event listeners subscribing to actions from parent\n   *\n   * When the action handler handles as action, it returns `true`, otherwise `false`.\n   */\n  function useOnAction(_ref) {\n    let {\n      router,\n      getState,\n      setState,\n      key,\n      actionListeners,\n      beforeRemoveListeners,\n      routerConfigOptions,\n      emitter\n    } = _ref;\n    const {\n      onAction: onActionParent,\n      onRouteFocus: onRouteFocusParent,\n      addListener: addListenerParent,\n      onDispatchAction\n    } = React.useContext(_NavigationBuilderContext.NavigationBuilderContext);\n    const navigationInChildEnabled = React.useContext(_DeprecatedNavigationInChildContext.DeprecatedNavigationInChildContext);\n    const routerConfigOptionsRef = React.useRef(routerConfigOptions);\n    React.useEffect(() => {\n      routerConfigOptionsRef.current = routerConfigOptions;\n    });\n    const onAction = React.useCallback(function (action) {\n      let visitedNavigators = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Set();\n      const state = getState();\n\n      // Since actions can bubble both up and down, they could come to the same navigator again\n      // We keep track of navigators which have already tried to handle the action and return if it's already visited\n      if (visitedNavigators.has(state.key)) {\n        return false;\n      }\n      visitedNavigators.add(state.key);\n      if (typeof action.target !== 'string' || action.target === state.key) {\n        let result = router.getStateForAction(state, action, routerConfigOptionsRef.current);\n\n        // If a target is specified and set to current navigator, the action shouldn't bubble\n        // So instead of `null`, we use the state object for such cases to signal that action was handled\n        result = result === null && action.target === state.key ? state : result;\n        if (result !== null) {\n          onDispatchAction(action, state === result);\n          if (state !== result) {\n            const isPrevented = (0, _useOnPreventRemove.shouldPreventRemove)(emitter, beforeRemoveListeners, state.routes, result.routes, action);\n            if (isPrevented) {\n              return true;\n            }\n            setState(result);\n          }\n          if (onRouteFocusParent !== undefined) {\n            // Some actions such as `NAVIGATE` also want to bring the navigated route to focus in the whole tree\n            // This means we need to focus all of the parent navigators of this navigator as well\n            const shouldFocus = router.shouldActionChangeFocus(action);\n            if (shouldFocus && key !== undefined) {\n              onRouteFocusParent(key);\n            }\n          }\n          return true;\n        }\n      }\n      if (onActionParent !== undefined) {\n        // Bubble action to the parent if the current navigator didn't handle it\n        if (onActionParent(action, visitedNavigators)) {\n          return true;\n        }\n      }\n      if (typeof action.target === 'string' ||\n      // For backward compatibility\n      action.type === 'NAVIGATE_DEPRECATED' || navigationInChildEnabled) {\n        // If the action wasn't handled by current navigator or a parent navigator, let children handle it\n        // Handling this when target isn't specified is deprecated and will be removed in the future\n        for (let i = actionListeners.length - 1; i >= 0; i--) {\n          const listener = actionListeners[i];\n          if (listener(action, visitedNavigators)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }, [actionListeners, beforeRemoveListeners, emitter, getState, navigationInChildEnabled, key, onActionParent, onDispatchAction, onRouteFocusParent, router, setState]);\n    (0, _useOnPreventRemove.useOnPreventRemove)({\n      getState,\n      emitter,\n      beforeRemoveListeners\n    });\n    React.useEffect(() => addListenerParent?.('action', onAction), [addListenerParent, onAction]);\n    return onAction;\n  }\n});","lineCount":108,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13,"exports"],[7,9,1,13],[7,10,1,13,"useOnAction"],[7,21,1,13],[7,24,1,13,"useOnAction"],[7,35,1,13],[8,2,3,0],[8,6,3,0,"React"],[8,11,3,0],[8,14,3,0,"_interopRequireWildcard"],[8,37,3,0],[8,38,3,0,"require"],[8,45,3,0],[8,46,3,0,"_dependencyMap"],[8,60,3,0],[9,2,4,0],[9,6,4,0,"_DeprecatedNavigationInChildContext"],[9,41,4,0],[9,44,4,0,"require"],[9,51,4,0],[9,52,4,0,"_dependencyMap"],[9,66,4,0],[10,2,5,0],[10,6,5,0,"_NavigationBuilderContext"],[10,31,5,0],[10,34,5,0,"require"],[10,41,5,0],[10,42,5,0,"_dependencyMap"],[10,56,5,0],[11,2,6,0],[11,6,6,0,"_useOnPreventRemove"],[11,25,6,0],[11,28,6,0,"require"],[11,35,6,0],[11,36,6,0,"_dependencyMap"],[11,50,6,0],[12,2,6,82],[12,11,6,82,"_interopRequireWildcard"],[12,35,6,82,"e"],[12,36,6,82],[12,38,6,82,"t"],[12,39,6,82],[12,68,6,82,"WeakMap"],[12,75,6,82],[12,81,6,82,"r"],[12,82,6,82],[12,89,6,82,"WeakMap"],[12,96,6,82],[12,100,6,82,"n"],[12,101,6,82],[12,108,6,82,"WeakMap"],[12,115,6,82],[12,127,6,82,"_interopRequireWildcard"],[12,150,6,82],[12,162,6,82,"_interopRequireWildcard"],[12,163,6,82,"e"],[12,164,6,82],[12,166,6,82,"t"],[12,167,6,82],[12,176,6,82,"t"],[12,177,6,82],[12,181,6,82,"e"],[12,182,6,82],[12,186,6,82,"e"],[12,187,6,82],[12,188,6,82,"__esModule"],[12,198,6,82],[12,207,6,82,"e"],[12,208,6,82],[12,214,6,82,"o"],[12,215,6,82],[12,217,6,82,"i"],[12,218,6,82],[12,220,6,82,"f"],[12,221,6,82],[12,226,6,82,"__proto__"],[12,235,6,82],[12,243,6,82,"default"],[12,250,6,82],[12,252,6,82,"e"],[12,253,6,82],[12,270,6,82,"e"],[12,271,6,82],[12,294,6,82,"e"],[12,295,6,82],[12,320,6,82,"e"],[12,321,6,82],[12,330,6,82,"f"],[12,331,6,82],[12,337,6,82,"o"],[12,338,6,82],[12,341,6,82,"t"],[12,342,6,82],[12,345,6,82,"n"],[12,346,6,82],[12,349,6,82,"r"],[12,350,6,82],[12,358,6,82,"o"],[12,359,6,82],[12,360,6,82,"has"],[12,363,6,82],[12,364,6,82,"e"],[12,365,6,82],[12,375,6,82,"o"],[12,376,6,82],[12,377,6,82,"get"],[12,380,6,82],[12,381,6,82,"e"],[12,382,6,82],[12,385,6,82,"o"],[12,386,6,82],[12,387,6,82,"set"],[12,390,6,82],[12,391,6,82,"e"],[12,392,6,82],[12,394,6,82,"f"],[12,395,6,82],[12,411,6,82,"t"],[12,412,6,82],[12,416,6,82,"e"],[12,417,6,82],[12,433,6,82,"t"],[12,434,6,82],[12,441,6,82,"hasOwnProperty"],[12,455,6,82],[12,456,6,82,"call"],[12,460,6,82],[12,461,6,82,"e"],[12,462,6,82],[12,464,6,82,"t"],[12,465,6,82],[12,472,6,82,"i"],[12,473,6,82],[12,477,6,82,"o"],[12,478,6,82],[12,481,6,82,"Object"],[12,487,6,82],[12,488,6,82,"defineProperty"],[12,502,6,82],[12,507,6,82,"Object"],[12,513,6,82],[12,514,6,82,"getOwnPropertyDescriptor"],[12,538,6,82],[12,539,6,82,"e"],[12,540,6,82],[12,542,6,82,"t"],[12,543,6,82],[12,550,6,82,"i"],[12,551,6,82],[12,552,6,82,"get"],[12,555,6,82],[12,559,6,82,"i"],[12,560,6,82],[12,561,6,82,"set"],[12,564,6,82],[12,568,6,82,"o"],[12,569,6,82],[12,570,6,82,"f"],[12,571,6,82],[12,573,6,82,"t"],[12,574,6,82],[12,576,6,82,"i"],[12,577,6,82],[12,581,6,82,"f"],[12,582,6,82],[12,583,6,82,"t"],[12,584,6,82],[12,588,6,82,"e"],[12,589,6,82],[12,590,6,82,"t"],[12,591,6,82],[12,602,6,82,"f"],[12,603,6,82],[12,608,6,82,"e"],[12,609,6,82],[12,611,6,82,"t"],[12,612,6,82],[13,2,7,0],[14,0,8,0],[15,0,9,0],[16,0,10,0],[17,0,11,0],[18,0,12,0],[19,0,13,0],[20,0,14,0],[21,0,15,0],[22,2,16,7],[22,11,16,16,"useOnAction"],[22,22,16,27,"useOnAction"],[22,23,16,27,"_ref"],[22,27,16,27],[22,29,25,3],[23,4,25,3],[23,8,16,28],[24,6,17,2,"router"],[24,12,17,8],[25,6,18,2,"getState"],[25,14,18,10],[26,6,19,2,"setState"],[26,14,19,10],[27,6,20,2,"key"],[27,9,20,5],[28,6,21,2,"actionListeners"],[28,21,21,17],[29,6,22,2,"beforeRemoveListeners"],[29,27,22,23],[30,6,23,2,"routerConfigOptions"],[30,25,23,21],[31,6,24,2,"emitter"],[32,4,25,0],[32,5,25,1],[32,8,25,1,"_ref"],[32,12,25,1],[33,4,26,2],[33,10,26,8],[34,6,27,4,"onAction"],[34,14,27,12],[34,16,27,14,"onActionParent"],[34,30,27,28],[35,6,28,4,"onRouteFocus"],[35,18,28,16],[35,20,28,18,"onRouteFocusParent"],[35,38,28,36],[36,6,29,4,"addListener"],[36,17,29,15],[36,19,29,17,"addListenerParent"],[36,36,29,34],[37,6,30,4,"onDispatchAction"],[38,4,31,2],[38,5,31,3],[38,8,31,6,"React"],[38,13,31,11],[38,14,31,12,"useContext"],[38,24,31,22],[38,25,31,23,"NavigationBuilderContext"],[38,75,31,47],[38,76,31,48],[39,4,32,2],[39,10,32,8,"navigationInChildEnabled"],[39,34,32,32],[39,37,32,35,"React"],[39,42,32,40],[39,43,32,41,"useContext"],[39,53,32,51],[39,54,32,52,"DeprecatedNavigationInChildContext"],[39,124,32,86],[39,125,32,87],[40,4,33,2],[40,10,33,8,"routerConfigOptionsRef"],[40,32,33,30],[40,35,33,33,"React"],[40,40,33,38],[40,41,33,39,"useRef"],[40,47,33,45],[40,48,33,46,"routerConfigOptions"],[40,67,33,65],[40,68,33,66],[41,4,34,2,"React"],[41,9,34,7],[41,10,34,8,"useEffect"],[41,19,34,17],[41,20,34,18],[41,26,34,24],[42,6,35,4,"routerConfigOptionsRef"],[42,28,35,26],[42,29,35,27,"current"],[42,36,35,34],[42,39,35,37,"routerConfigOptions"],[42,58,35,56],[43,4,36,2],[43,5,36,3],[43,6,36,4],[44,4,37,2],[44,10,37,8,"onAction"],[44,18,37,16],[44,21,37,19,"React"],[44,26,37,24],[44,27,37,25,"useCallback"],[44,38,37,36],[44,39,37,37],[44,49,37,38,"action"],[44,55,37,44],[44,57,37,80],[45,6,37,80],[45,10,37,46,"visitedNavigators"],[45,27,37,63],[45,30,37,63,"arguments"],[45,39,37,63],[45,40,37,63,"length"],[45,46,37,63],[45,54,37,63,"arguments"],[45,63,37,63],[45,71,37,63,"undefined"],[45,80,37,63],[45,83,37,63,"arguments"],[45,92,37,63],[45,98,37,66],[45,102,37,70,"Set"],[45,105,37,73],[45,106,37,74],[45,107,37,75],[46,6,38,4],[46,12,38,10,"state"],[46,17,38,15],[46,20,38,18,"getState"],[46,28,38,26],[46,29,38,27],[46,30,38,28],[48,6,40,4],[49,6,41,4],[50,6,42,4],[50,10,42,8,"visitedNavigators"],[50,27,42,25],[50,28,42,26,"has"],[50,31,42,29],[50,32,42,30,"state"],[50,37,42,35],[50,38,42,36,"key"],[50,41,42,39],[50,42,42,40],[50,44,42,42],[51,8,43,6],[51,15,43,13],[51,20,43,18],[52,6,44,4],[53,6,45,4,"visitedNavigators"],[53,23,45,21],[53,24,45,22,"add"],[53,27,45,25],[53,28,45,26,"state"],[53,33,45,31],[53,34,45,32,"key"],[53,37,45,35],[53,38,45,36],[54,6,46,4],[54,10,46,8],[54,17,46,15,"action"],[54,23,46,21],[54,24,46,22,"target"],[54,30,46,28],[54,35,46,33],[54,43,46,41],[54,47,46,45,"action"],[54,53,46,51],[54,54,46,52,"target"],[54,60,46,58],[54,65,46,63,"state"],[54,70,46,68],[54,71,46,69,"key"],[54,74,46,72],[54,76,46,74],[55,8,47,6],[55,12,47,10,"result"],[55,18,47,16],[55,21,47,19,"router"],[55,27,47,25],[55,28,47,26,"getStateForAction"],[55,45,47,43],[55,46,47,44,"state"],[55,51,47,49],[55,53,47,51,"action"],[55,59,47,57],[55,61,47,59,"routerConfigOptionsRef"],[55,83,47,81],[55,84,47,82,"current"],[55,91,47,89],[55,92,47,90],[57,8,49,6],[58,8,50,6],[59,8,51,6,"result"],[59,14,51,12],[59,17,51,15,"result"],[59,23,51,21],[59,28,51,26],[59,32,51,30],[59,36,51,34,"action"],[59,42,51,40],[59,43,51,41,"target"],[59,49,51,47],[59,54,51,52,"state"],[59,59,51,57],[59,60,51,58,"key"],[59,63,51,61],[59,66,51,64,"state"],[59,71,51,69],[59,74,51,72,"result"],[59,80,51,78],[60,8,52,6],[60,12,52,10,"result"],[60,18,52,16],[60,23,52,21],[60,27,52,25],[60,29,52,27],[61,10,53,8,"onDispatchAction"],[61,26,53,24],[61,27,53,25,"action"],[61,33,53,31],[61,35,53,33,"state"],[61,40,53,38],[61,45,53,43,"result"],[61,51,53,49],[61,52,53,50],[62,10,54,8],[62,14,54,12,"state"],[62,19,54,17],[62,24,54,22,"result"],[62,30,54,28],[62,32,54,30],[63,12,55,10],[63,18,55,16,"isPrevented"],[63,29,55,27],[63,32,55,30],[63,36,55,30,"shouldPreventRemove"],[63,75,55,49],[63,77,55,50,"emitter"],[63,84,55,57],[63,86,55,59,"beforeRemoveListeners"],[63,107,55,80],[63,109,55,82,"state"],[63,114,55,87],[63,115,55,88,"routes"],[63,121,55,94],[63,123,55,96,"result"],[63,129,55,102],[63,130,55,103,"routes"],[63,136,55,109],[63,138,55,111,"action"],[63,144,55,117],[63,145,55,118],[64,12,56,10],[64,16,56,14,"isPrevented"],[64,27,56,25],[64,29,56,27],[65,14,57,12],[65,21,57,19],[65,25,57,23],[66,12,58,10],[67,12,59,10,"setState"],[67,20,59,18],[67,21,59,19,"result"],[67,27,59,25],[67,28,59,26],[68,10,60,8],[69,10,61,8],[69,14,61,12,"onRouteFocusParent"],[69,32,61,30],[69,37,61,35,"undefined"],[69,46,61,44],[69,48,61,46],[70,12,62,10],[71,12,63,10],[72,12,64,10],[72,18,64,16,"shouldFocus"],[72,29,64,27],[72,32,64,30,"router"],[72,38,64,36],[72,39,64,37,"shouldActionChangeFocus"],[72,62,64,60],[72,63,64,61,"action"],[72,69,64,67],[72,70,64,68],[73,12,65,10],[73,16,65,14,"shouldFocus"],[73,27,65,25],[73,31,65,29,"key"],[73,34,65,32],[73,39,65,37,"undefined"],[73,48,65,46],[73,50,65,48],[74,14,66,12,"onRouteFocusParent"],[74,32,66,30],[74,33,66,31,"key"],[74,36,66,34],[74,37,66,35],[75,12,67,10],[76,10,68,8],[77,10,69,8],[77,17,69,15],[77,21,69,19],[78,8,70,6],[79,6,71,4],[80,6,72,4],[80,10,72,8,"onActionParent"],[80,24,72,22],[80,29,72,27,"undefined"],[80,38,72,36],[80,40,72,38],[81,8,73,6],[82,8,74,6],[82,12,74,10,"onActionParent"],[82,26,74,24],[82,27,74,25,"action"],[82,33,74,31],[82,35,74,33,"visitedNavigators"],[82,52,74,50],[82,53,74,51],[82,55,74,53],[83,10,75,8],[83,17,75,15],[83,21,75,19],[84,8,76,6],[85,6,77,4],[86,6,78,4],[86,10,78,8],[86,17,78,15,"action"],[86,23,78,21],[86,24,78,22,"target"],[86,30,78,28],[86,35,78,33],[86,43,78,41],[87,6,79,4],[88,6,80,4,"action"],[88,12,80,10],[88,13,80,11,"type"],[88,17,80,15],[88,22,80,20],[88,43,80,41],[88,47,80,45,"navigationInChildEnabled"],[88,71,80,69],[88,73,80,71],[89,8,81,6],[90,8,82,6],[91,8,83,6],[91,13,83,11],[91,17,83,15,"i"],[91,18,83,16],[91,21,83,19,"actionListeners"],[91,36,83,34],[91,37,83,35,"length"],[91,43,83,41],[91,46,83,44],[91,47,83,45],[91,49,83,47,"i"],[91,50,83,48],[91,54,83,52],[91,55,83,53],[91,57,83,55,"i"],[91,58,83,56],[91,60,83,58],[91,62,83,60],[92,10,84,8],[92,16,84,14,"listener"],[92,24,84,22],[92,27,84,25,"actionListeners"],[92,42,84,40],[92,43,84,41,"i"],[92,44,84,42],[92,45,84,43],[93,10,85,8],[93,14,85,12,"listener"],[93,22,85,20],[93,23,85,21,"action"],[93,29,85,27],[93,31,85,29,"visitedNavigators"],[93,48,85,46],[93,49,85,47],[93,51,85,49],[94,12,86,10],[94,19,86,17],[94,23,86,21],[95,10,87,8],[96,8,88,6],[97,6,89,4],[98,6,90,4],[98,13,90,11],[98,18,90,16],[99,4,91,2],[99,5,91,3],[99,7,91,5],[99,8,91,6,"actionListeners"],[99,23,91,21],[99,25,91,23,"beforeRemoveListeners"],[99,46,91,44],[99,48,91,46,"emitter"],[99,55,91,53],[99,57,91,55,"getState"],[99,65,91,63],[99,67,91,65,"navigationInChildEnabled"],[99,91,91,89],[99,93,91,91,"key"],[99,96,91,94],[99,98,91,96,"onActionParent"],[99,112,91,110],[99,114,91,112,"onDispatchAction"],[99,130,91,128],[99,132,91,130,"onRouteFocusParent"],[99,150,91,148],[99,152,91,150,"router"],[99,158,91,156],[99,160,91,158,"setState"],[99,168,91,166],[99,169,91,167],[99,170,91,168],[100,4,92,2],[100,8,92,2,"useOnPreventRemove"],[100,46,92,20],[100,48,92,21],[101,6,93,4,"getState"],[101,14,93,12],[102,6,94,4,"emitter"],[102,13,94,11],[103,6,95,4,"beforeRemoveListeners"],[104,4,96,2],[104,5,96,3],[104,6,96,4],[105,4,97,2,"React"],[105,9,97,7],[105,10,97,8,"useEffect"],[105,19,97,17],[105,20,97,18],[105,26,97,24,"addListenerParent"],[105,43,97,41],[105,46,97,44],[105,54,97,52],[105,56,97,54,"onAction"],[105,64,97,62],[105,65,97,63],[105,67,97,65],[105,68,97,66,"addListenerParent"],[105,85,97,83],[105,87,97,85,"onAction"],[105,95,97,93],[105,96,97,94],[105,97,97,95],[106,4,98,2],[106,11,98,9,"onAction"],[106,19,98,17],[107,2,99,0],[108,0,99,1]],"functionMap":{"names":["<global>","useOnAction","React.useEffect$argument_0","onAction"],"mappings":"AAA;OCe;kBCkB;GDE;qCEC;GFsD;kBCM,6CD;CDE"}},"type":"js/module"}]}