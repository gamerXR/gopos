{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(); // Backend URL - MUST be set via environment variables\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  if (!BACKEND_URL) {\n    throw new Error('EXPO_PUBLIC_BACKEND_URL environment variable is required');\n  }\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (phone, password) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/login`, {\n          phone,\n          password\n        });\n        const {\n          token: newToken,\n          user: newUser\n        } = response.data;\n        await AsyncStorage.default.setItem('token', newToken);\n        await AsyncStorage.default.setItem('user', JSON.stringify(newUser));\n        setToken(newToken);\n        setUser(newUser);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('token');\n      await AsyncStorage.default.removeItem('user');\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        logout,\n        isLoading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":115,"map":[[6,26,5,0],[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"value"],[8,9,5,0],[9,2,5,0],[10,2,5,0],[10,11,5,0,"_interopDefault"],[10,27,5,0,"e"],[10,28,5,0],[11,4,5,0],[11,11,5,0,"e"],[11,12,5,0],[11,16,5,0,"e"],[11,17,5,0],[11,18,5,0,"__esModule"],[11,28,5,0],[11,31,5,0,"e"],[11,32,5,0],[12,6,5,0,"default"],[12,13,5,0],[12,15,5,0,"e"],[13,4,5,0],[14,2,5,0],[15,2,31,0,"Object"],[15,8,31,0],[15,9,31,0,"defineProperty"],[15,23,31,0],[15,24,31,0,"exports"],[15,31,31,0],[16,4,31,0,"enumerable"],[16,14,31,0],[17,4,31,0,"get"],[17,7,31,0],[17,18,31,0,"get"],[17,19,31,0],[18,6,31,0],[18,13,31,0,"AuthProvider"],[18,25,31,0],[19,4,31,0],[20,2,31,0],[21,2,89,0,"Object"],[21,8,89,0],[21,9,89,0,"defineProperty"],[21,23,89,0],[21,24,89,0,"exports"],[21,31,89,0],[22,4,89,0,"enumerable"],[22,14,89,0],[23,4,89,0,"get"],[23,7,89,0],[23,18,89,0,"get"],[23,19,89,0],[24,6,89,0],[24,13,89,0,"useAuth"],[24,20,89,0],[25,4,89,0],[26,2,89,0],[27,2,95,2],[27,6,95,2,"_expoVirtualEnv"],[27,21,95,2],[27,24,95,2,"require"],[27,31,95,2],[27,32,95,2,"_dependencyMap"],[27,46,95,2],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,42,2,0],[29,45,2,0,"require"],[29,52,2,0],[29,53,2,0,"_dependencyMap"],[29,67,2,0],[30,2,2,0],[30,6,2,0,"AsyncStorage"],[30,18,2,0],[30,21,2,0,"_interopDefault"],[30,36,2,0],[30,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[30,73,2,0],[31,2,3,0],[31,6,3,0,"_axios"],[31,12,3,0],[31,15,3,0,"require"],[31,22,3,0],[31,23,3,0,"_dependencyMap"],[31,37,3,0],[32,2,3,0],[32,6,3,0,"axios"],[32,11,3,0],[32,14,3,0,"_interopDefault"],[32,29,3,0],[32,30,3,0,"_axios"],[32,36,3,0],[33,2,3,26],[33,6,3,26,"_reactJsxDevRuntime"],[33,25,3,26],[33,28,3,26,"require"],[33,35,3,26],[33,36,3,26,"_dependencyMap"],[33,50,3,26],[34,2,6,0],[34,8,6,6,"BACKEND_URL"],[34,19,6,17],[34,22,6,17,"_expoVirtualEnv"],[34,37,6,17],[34,38,6,17,"env"],[34,41,6,17],[34,42,6,17,"EXPO_PUBLIC_BACKEND_URL"],[34,65,6,55],[35,2,8,0],[35,6,8,4],[35,7,8,5,"BACKEND_URL"],[35,18,8,16],[35,20,8,18],[36,4,9,2],[36,10,9,8],[36,14,9,12,"Error"],[36,19,9,17],[36,20,9,18],[36,78,9,76],[36,79,9,77],[37,2,10,0],[38,2,29,0],[38,8,29,6,"AuthContext"],[38,19,29,17],[38,35,29,20],[38,39,29,20,"createContext"],[38,45,29,33],[38,46,29,33,"createContext"],[38,59,29,33],[38,61,29,63,"undefined"],[38,70,29,72],[38,71,29,73],[39,2,31,7],[39,8,31,13,"AuthProvider"],[39,20,31,66],[39,23,31,69,"AuthProvider"],[39,24,31,70],[40,4,31,72,"children"],[41,2,31,81],[41,3,31,82],[41,8,31,87],[42,4,31,87,"_s"],[42,6,31,87],[43,4,32,2],[43,10,32,8],[43,11,32,9,"user"],[43,15,32,13],[43,17,32,15,"setUser"],[43,24,32,22],[43,25,32,23],[43,28,32,26],[43,32,32,26,"useState"],[43,38,32,34],[43,39,32,34,"useState"],[43,47,32,34],[43,49,32,48],[43,53,32,52],[43,54,32,53],[44,4,33,2],[44,10,33,8],[44,11,33,9,"token"],[44,16,33,14],[44,18,33,16,"setToken"],[44,26,33,24],[44,27,33,25],[44,30,33,28],[44,34,33,28,"useState"],[44,40,33,36],[44,41,33,36,"useState"],[44,49,33,36],[44,51,33,52],[44,55,33,56],[44,56,33,57],[45,4,34,2],[45,10,34,8],[45,11,34,9,"isLoading"],[45,20,34,18],[45,22,34,20,"setIsLoading"],[45,34,34,32],[45,35,34,33],[45,38,34,36],[45,42,34,36,"useState"],[45,48,34,44],[45,49,34,44,"useState"],[45,57,34,44],[45,59,34,45],[45,63,34,49],[45,64,34,50],[46,4,36,2],[46,8,36,2,"useEffect"],[46,14,36,11],[46,15,36,11,"useEffect"],[46,24,36,11],[46,26,36,12],[46,32,36,18],[47,6,37,4,"loadStoredAuth"],[47,20,37,18],[47,21,37,19],[47,22,37,20],[48,4,38,2],[48,5,38,3],[48,7,38,5],[48,9,38,7],[48,10,38,8],[49,4,40,2],[49,10,40,8,"loadStoredAuth"],[49,24,40,22],[49,27,40,25],[49,33,40,25,"loadStoredAuth"],[49,34,40,25],[49,39,40,37],[50,6,41,4],[50,10,41,8],[51,8,42,6],[51,14,42,12,"storedToken"],[51,25,42,23],[51,28,42,26],[51,34,42,32,"AsyncStorage"],[51,46,42,44],[51,47,42,44,"default"],[51,54,42,44],[51,55,42,45,"getItem"],[51,62,42,52],[51,63,42,53],[51,70,42,60],[51,71,42,61],[52,8,43,6],[52,14,43,12,"storedUser"],[52,24,43,22],[52,27,43,25],[52,33,43,31,"AsyncStorage"],[52,45,43,43],[52,46,43,43,"default"],[52,53,43,43],[52,54,43,44,"getItem"],[52,61,43,51],[52,62,43,52],[52,68,43,58],[52,69,43,59],[53,8,45,6],[53,12,45,10,"storedToken"],[53,23,45,21],[53,27,45,25,"storedUser"],[53,37,45,35],[53,39,45,37],[54,10,46,8,"setToken"],[54,18,46,16],[54,19,46,17,"storedToken"],[54,30,46,28],[54,31,46,29],[55,10,47,8,"setUser"],[55,17,47,15],[55,18,47,16,"JSON"],[55,22,47,20],[55,23,47,21,"parse"],[55,28,47,26],[55,29,47,27,"storedUser"],[55,39,47,37],[55,40,47,38],[55,41,47,39],[56,8,48,6],[57,6,49,4],[57,7,49,5],[57,8,49,6],[57,15,49,13,"error"],[57,20,49,18],[57,22,49,20],[58,8,50,6,"console"],[58,15,50,13],[58,16,50,14,"error"],[58,21,50,19],[58,22,50,20],[58,43,50,41],[58,45,50,43,"error"],[58,50,50,48],[58,51,50,49],[59,6,51,4],[59,7,51,5],[59,16,51,14],[60,8,52,6,"setIsLoading"],[60,20,52,18],[60,21,52,19],[60,26,52,24],[60,27,52,25],[61,6,53,4],[62,4,54,2],[62,5,54,3],[63,4,56,2],[63,10,56,8,"login"],[63,15,56,13],[63,18,56,16],[63,24,56,16,"login"],[63,25,56,23,"phone"],[63,30,56,36],[63,32,56,38,"password"],[63,40,56,54],[63,45,56,59],[64,6,57,4],[64,10,57,8],[65,8,58,6],[65,14,58,12,"response"],[65,22,58,20],[65,25,58,23],[65,31,58,29,"axios"],[65,36,58,34],[65,37,58,34,"default"],[65,44,58,34],[65,45,58,35,"post"],[65,49,58,39],[65,50,58,40],[65,53,58,43,"BACKEND_URL"],[65,64,58,54],[65,76,58,66],[65,78,58,68],[66,10,59,8,"phone"],[66,15,59,13],[67,10,60,8,"password"],[68,8,61,6],[68,9,61,7],[68,10,61,8],[69,8,63,6],[69,14,63,12],[70,10,63,14,"token"],[70,15,63,19],[70,17,63,21,"newToken"],[70,25,63,29],[71,10,63,31,"user"],[71,14,63,35],[71,16,63,37,"newUser"],[72,8,63,45],[72,9,63,46],[72,12,63,49,"response"],[72,20,63,57],[72,21,63,58,"data"],[72,25,63,62],[73,8,65,6],[73,14,65,12,"AsyncStorage"],[73,26,65,24],[73,27,65,24,"default"],[73,34,65,24],[73,35,65,25,"setItem"],[73,42,65,32],[73,43,65,33],[73,50,65,40],[73,52,65,42,"newToken"],[73,60,65,50],[73,61,65,51],[74,8,66,6],[74,14,66,12,"AsyncStorage"],[74,26,66,24],[74,27,66,24,"default"],[74,34,66,24],[74,35,66,25,"setItem"],[74,42,66,32],[74,43,66,33],[74,49,66,39],[74,51,66,41,"JSON"],[74,55,66,45],[74,56,66,46,"stringify"],[74,65,66,55],[74,66,66,56,"newUser"],[74,73,66,63],[74,74,66,64],[74,75,66,65],[75,8,68,6,"setToken"],[75,16,68,14],[75,17,68,15,"newToken"],[75,25,68,23],[75,26,68,24],[76,8,69,6,"setUser"],[76,15,69,13],[76,16,69,14,"newUser"],[76,23,69,21],[76,24,69,22],[77,6,70,4],[77,7,70,5],[77,8,70,6],[77,15,70,13,"error"],[77,20,70,23],[77,22,70,25],[78,8,71,6],[78,14,71,12],[78,18,71,16,"Error"],[78,23,71,21],[78,24,71,22,"error"],[78,29,71,27],[78,30,71,28,"response"],[78,38,71,36],[78,40,71,38,"data"],[78,44,71,42],[78,46,71,44,"detail"],[78,52,71,50],[78,56,71,54],[78,70,71,68],[78,71,71,69],[79,6,72,4],[80,4,73,2],[80,5,73,3],[81,4,75,2],[81,10,75,8,"logout"],[81,16,75,14],[81,19,75,17],[81,25,75,17,"logout"],[81,26,75,17],[81,31,75,29],[82,6,76,4],[82,12,76,10,"AsyncStorage"],[82,24,76,22],[82,25,76,22,"default"],[82,32,76,22],[82,33,76,23,"removeItem"],[82,43,76,33],[82,44,76,34],[82,51,76,41],[82,52,76,42],[83,6,77,4],[83,12,77,10,"AsyncStorage"],[83,24,77,22],[83,25,77,22,"default"],[83,32,77,22],[83,33,77,23,"removeItem"],[83,43,77,33],[83,44,77,34],[83,50,77,40],[83,51,77,41],[84,6,78,4,"setToken"],[84,14,78,12],[84,15,78,13],[84,19,78,17],[84,20,78,18],[85,6,79,4,"setUser"],[85,13,79,11],[85,14,79,12],[85,18,79,16],[85,19,79,17],[86,4,80,2],[86,5,80,3],[87,4,82,2],[87,24,83,4],[87,28,83,4,"_reactJsxDevRuntime"],[87,47,83,4],[87,48,83,4,"jsxDEV"],[87,54,83,4],[87,56,83,5,"AuthContext"],[87,67,83,16],[87,68,83,17,"Provider"],[87,76,83,25],[88,6,83,26,"value"],[88,11,83,31],[88,13,83,33],[89,8,83,35,"user"],[89,12,83,39],[90,8,83,41,"token"],[90,13,83,46],[91,8,83,48,"login"],[91,13,83,53],[92,8,83,55,"logout"],[92,14,83,61],[93,8,83,63,"isLoading"],[94,6,83,73],[94,7,83,75],[95,6,83,75,"children"],[95,14,83,75],[95,16,84,7,"children"],[96,4,84,15],[97,6,84,15,"fileName"],[97,14,84,15],[97,16,84,15,"_jsxFileName"],[97,28,84,15],[98,6,84,15,"lineNumber"],[98,16,84,15],[99,6,84,15,"columnNumber"],[99,18,84,15],[100,4,84,15],[100,11,85,26],[100,12,85,27],[101,2,87,0],[101,3,87,1],[102,2,87,2,"_s"],[102,4,87,2],[102,5,31,13,"AuthProvider"],[102,17,31,66],[103,2,31,66,"_c"],[103,4,31,66],[103,7,31,13,"AuthProvider"],[103,19,31,66],[104,2,89,7],[104,8,89,13,"useAuth"],[104,15,89,20],[104,18,89,23,"useAuth"],[104,19,89,23],[104,24,89,29],[105,4,89,29,"_s2"],[105,7,89,29],[106,4,90,2],[106,10,90,8,"context"],[106,17,90,15],[106,20,90,18],[106,24,90,18,"useContext"],[106,30,90,28],[106,31,90,28,"useContext"],[106,41,90,28],[106,43,90,29,"AuthContext"],[106,54,90,40],[106,55,90,41],[107,4,91,2],[107,8,91,6],[107,9,91,7,"context"],[107,16,91,14],[107,18,91,16],[108,6,92,4],[108,12,92,10],[108,16,92,14,"Error"],[108,21,92,19],[108,22,92,20],[108,64,92,62],[108,65,92,63],[109,4,93,2],[110,4,94,2],[110,11,94,9,"context"],[110,18,94,16],[111,2,95,0],[111,3,95,1],[112,2,95,2,"_s2"],[112,5,95,2],[112,6,89,13,"useAuth"],[112,13,89,20],[113,2,89,20],[113,6,89,20,"_c"],[113,8,89,20],[114,2,89,20,"$RefreshReg$"],[114,14,89,20],[114,15,89,20,"_c"],[114,17,89,20],[115,0,89,20],[115,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","logout","useAuth"],"mappings":"AAA;qEC8B;YCK;GDE;yBEE;GFc;gBGE;GHiB;iBIE;GJK;CDO;uBME;CNM"},"hasCjsExports":false},"type":"js/module"}]}