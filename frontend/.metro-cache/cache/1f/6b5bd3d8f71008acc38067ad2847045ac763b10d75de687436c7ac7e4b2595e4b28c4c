{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(); // Backend URL - with fallback for production APK builds\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'https://pos-foodbev.emergent.host';\n\n  // Log for debugging (removed in production)\n  if (__DEV__) {\n    console.log('Backend URL:', BACKEND_URL);\n  }\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (phone, password) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/login`, {\n          phone,\n          password\n        });\n        const {\n          token: newToken,\n          user: newUser\n        } = response.data;\n        await AsyncStorage.default.setItem('token', newToken);\n        await AsyncStorage.default.setItem('user', JSON.stringify(newUser));\n        setToken(newToken);\n        setUser(newUser);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('token');\n      await AsyncStorage.default.removeItem('user');\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        logout,\n        isLoading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":117,"map":[[6,26,5,0],[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"value"],[8,9,5,0],[9,2,5,0],[10,2,5,0],[10,11,5,0,"_interopDefault"],[10,27,5,0,"e"],[10,28,5,0],[11,4,5,0],[11,11,5,0,"e"],[11,12,5,0],[11,16,5,0,"e"],[11,17,5,0],[11,18,5,0,"__esModule"],[11,28,5,0],[11,31,5,0,"e"],[11,32,5,0],[12,6,5,0,"default"],[12,13,5,0],[12,15,5,0,"e"],[13,4,5,0],[14,2,5,0],[15,2,32,0,"Object"],[15,8,32,0],[15,9,32,0,"defineProperty"],[15,23,32,0],[15,24,32,0,"exports"],[15,31,32,0],[16,4,32,0,"enumerable"],[16,14,32,0],[17,4,32,0,"get"],[17,7,32,0],[17,18,32,0,"get"],[17,19,32,0],[18,6,32,0],[18,13,32,0,"AuthProvider"],[18,25,32,0],[19,4,32,0],[20,2,32,0],[21,2,90,0,"Object"],[21,8,90,0],[21,9,90,0,"defineProperty"],[21,23,90,0],[21,24,90,0,"exports"],[21,31,90,0],[22,4,90,0,"enumerable"],[22,14,90,0],[23,4,90,0,"get"],[23,7,90,0],[23,18,90,0,"get"],[23,19,90,0],[24,6,90,0],[24,13,90,0,"useAuth"],[24,20,90,0],[25,4,90,0],[26,2,90,0],[27,2,96,2],[27,6,96,2,"_expoVirtualEnv"],[27,21,96,2],[27,24,96,2,"require"],[27,31,96,2],[27,32,96,2,"_dependencyMap"],[27,46,96,2],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,42,2,0],[29,45,2,0,"require"],[29,52,2,0],[29,53,2,0,"_dependencyMap"],[29,67,2,0],[30,2,2,0],[30,6,2,0,"AsyncStorage"],[30,18,2,0],[30,21,2,0,"_interopDefault"],[30,36,2,0],[30,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[30,73,2,0],[31,2,3,0],[31,6,3,0,"_axios"],[31,12,3,0],[31,15,3,0,"require"],[31,22,3,0],[31,23,3,0,"_dependencyMap"],[31,37,3,0],[32,2,3,0],[32,6,3,0,"axios"],[32,11,3,0],[32,14,3,0,"_interopDefault"],[32,29,3,0],[32,30,3,0,"_axios"],[32,36,3,0],[33,2,3,26],[33,6,3,26,"_reactJsxDevRuntime"],[33,25,3,26],[33,28,3,26,"require"],[33,35,3,26],[33,36,3,26,"_dependencyMap"],[33,50,3,26],[34,2,6,0],[34,8,6,6,"BACKEND_URL"],[34,19,6,17],[34,22,6,20,"_expoVirtualEnv"],[34,37,6,20],[34,38,6,20,"env"],[34,41,6,20],[34,42,6,20,"EXPO_PUBLIC_BACKEND_URL"],[34,65,6,20],[34,69,6,59],[34,104,6,94],[36,2,8,0],[37,2,9,0],[37,6,9,4,"__DEV__"],[37,13,9,11],[37,15,9,13],[38,4,10,2,"console"],[38,11,10,9],[38,12,10,10,"log"],[38,15,10,13],[38,16,10,14],[38,30,10,28],[38,32,10,30,"BACKEND_URL"],[38,43,10,41],[38,44,10,42],[39,2,11,0],[40,2,30,0],[40,8,30,6,"AuthContext"],[40,19,30,17],[40,35,30,20],[40,39,30,20,"createContext"],[40,45,30,33],[40,46,30,33,"createContext"],[40,59,30,33],[40,61,30,63,"undefined"],[40,70,30,72],[40,71,30,73],[41,2,32,7],[41,8,32,13,"AuthProvider"],[41,20,32,66],[41,23,32,69,"AuthProvider"],[41,24,32,70],[42,4,32,72,"children"],[43,2,32,81],[43,3,32,82],[43,8,32,87],[44,4,32,87,"_s"],[44,6,32,87],[45,4,33,2],[45,10,33,8],[45,11,33,9,"user"],[45,15,33,13],[45,17,33,15,"setUser"],[45,24,33,22],[45,25,33,23],[45,28,33,26],[45,32,33,26,"useState"],[45,38,33,34],[45,39,33,34,"useState"],[45,47,33,34],[45,49,33,48],[45,53,33,52],[45,54,33,53],[46,4,34,2],[46,10,34,8],[46,11,34,9,"token"],[46,16,34,14],[46,18,34,16,"setToken"],[46,26,34,24],[46,27,34,25],[46,30,34,28],[46,34,34,28,"useState"],[46,40,34,36],[46,41,34,36,"useState"],[46,49,34,36],[46,51,34,52],[46,55,34,56],[46,56,34,57],[47,4,35,2],[47,10,35,8],[47,11,35,9,"isLoading"],[47,20,35,18],[47,22,35,20,"setIsLoading"],[47,34,35,32],[47,35,35,33],[47,38,35,36],[47,42,35,36,"useState"],[47,48,35,44],[47,49,35,44,"useState"],[47,57,35,44],[47,59,35,45],[47,63,35,49],[47,64,35,50],[48,4,37,2],[48,8,37,2,"useEffect"],[48,14,37,11],[48,15,37,11,"useEffect"],[48,24,37,11],[48,26,37,12],[48,32,37,18],[49,6,38,4,"loadStoredAuth"],[49,20,38,18],[49,21,38,19],[49,22,38,20],[50,4,39,2],[50,5,39,3],[50,7,39,5],[50,9,39,7],[50,10,39,8],[51,4,41,2],[51,10,41,8,"loadStoredAuth"],[51,24,41,22],[51,27,41,25],[51,33,41,25,"loadStoredAuth"],[51,34,41,25],[51,39,41,37],[52,6,42,4],[52,10,42,8],[53,8,43,6],[53,14,43,12,"storedToken"],[53,25,43,23],[53,28,43,26],[53,34,43,32,"AsyncStorage"],[53,46,43,44],[53,47,43,44,"default"],[53,54,43,44],[53,55,43,45,"getItem"],[53,62,43,52],[53,63,43,53],[53,70,43,60],[53,71,43,61],[54,8,44,6],[54,14,44,12,"storedUser"],[54,24,44,22],[54,27,44,25],[54,33,44,31,"AsyncStorage"],[54,45,44,43],[54,46,44,43,"default"],[54,53,44,43],[54,54,44,44,"getItem"],[54,61,44,51],[54,62,44,52],[54,68,44,58],[54,69,44,59],[55,8,46,6],[55,12,46,10,"storedToken"],[55,23,46,21],[55,27,46,25,"storedUser"],[55,37,46,35],[55,39,46,37],[56,10,47,8,"setToken"],[56,18,47,16],[56,19,47,17,"storedToken"],[56,30,47,28],[56,31,47,29],[57,10,48,8,"setUser"],[57,17,48,15],[57,18,48,16,"JSON"],[57,22,48,20],[57,23,48,21,"parse"],[57,28,48,26],[57,29,48,27,"storedUser"],[57,39,48,37],[57,40,48,38],[57,41,48,39],[58,8,49,6],[59,6,50,4],[59,7,50,5],[59,8,50,6],[59,15,50,13,"error"],[59,20,50,18],[59,22,50,20],[60,8,51,6,"console"],[60,15,51,13],[60,16,51,14,"error"],[60,21,51,19],[60,22,51,20],[60,43,51,41],[60,45,51,43,"error"],[60,50,51,48],[60,51,51,49],[61,6,52,4],[61,7,52,5],[61,16,52,14],[62,8,53,6,"setIsLoading"],[62,20,53,18],[62,21,53,19],[62,26,53,24],[62,27,53,25],[63,6,54,4],[64,4,55,2],[64,5,55,3],[65,4,57,2],[65,10,57,8,"login"],[65,15,57,13],[65,18,57,16],[65,24,57,16,"login"],[65,25,57,23,"phone"],[65,30,57,36],[65,32,57,38,"password"],[65,40,57,54],[65,45,57,59],[66,6,58,4],[66,10,58,8],[67,8,59,6],[67,14,59,12,"response"],[67,22,59,20],[67,25,59,23],[67,31,59,29,"axios"],[67,36,59,34],[67,37,59,34,"default"],[67,44,59,34],[67,45,59,35,"post"],[67,49,59,39],[67,50,59,40],[67,53,59,43,"BACKEND_URL"],[67,64,59,54],[67,76,59,66],[67,78,59,68],[68,10,60,8,"phone"],[68,15,60,13],[69,10,61,8,"password"],[70,8,62,6],[70,9,62,7],[70,10,62,8],[71,8,64,6],[71,14,64,12],[72,10,64,14,"token"],[72,15,64,19],[72,17,64,21,"newToken"],[72,25,64,29],[73,10,64,31,"user"],[73,14,64,35],[73,16,64,37,"newUser"],[74,8,64,45],[74,9,64,46],[74,12,64,49,"response"],[74,20,64,57],[74,21,64,58,"data"],[74,25,64,62],[75,8,66,6],[75,14,66,12,"AsyncStorage"],[75,26,66,24],[75,27,66,24,"default"],[75,34,66,24],[75,35,66,25,"setItem"],[75,42,66,32],[75,43,66,33],[75,50,66,40],[75,52,66,42,"newToken"],[75,60,66,50],[75,61,66,51],[76,8,67,6],[76,14,67,12,"AsyncStorage"],[76,26,67,24],[76,27,67,24,"default"],[76,34,67,24],[76,35,67,25,"setItem"],[76,42,67,32],[76,43,67,33],[76,49,67,39],[76,51,67,41,"JSON"],[76,55,67,45],[76,56,67,46,"stringify"],[76,65,67,55],[76,66,67,56,"newUser"],[76,73,67,63],[76,74,67,64],[76,75,67,65],[77,8,69,6,"setToken"],[77,16,69,14],[77,17,69,15,"newToken"],[77,25,69,23],[77,26,69,24],[78,8,70,6,"setUser"],[78,15,70,13],[78,16,70,14,"newUser"],[78,23,70,21],[78,24,70,22],[79,6,71,4],[79,7,71,5],[79,8,71,6],[79,15,71,13,"error"],[79,20,71,23],[79,22,71,25],[80,8,72,6],[80,14,72,12],[80,18,72,16,"Error"],[80,23,72,21],[80,24,72,22,"error"],[80,29,72,27],[80,30,72,28,"response"],[80,38,72,36],[80,40,72,38,"data"],[80,44,72,42],[80,46,72,44,"detail"],[80,52,72,50],[80,56,72,54],[80,70,72,68],[80,71,72,69],[81,6,73,4],[82,4,74,2],[82,5,74,3],[83,4,76,2],[83,10,76,8,"logout"],[83,16,76,14],[83,19,76,17],[83,25,76,17,"logout"],[83,26,76,17],[83,31,76,29],[84,6,77,4],[84,12,77,10,"AsyncStorage"],[84,24,77,22],[84,25,77,22,"default"],[84,32,77,22],[84,33,77,23,"removeItem"],[84,43,77,33],[84,44,77,34],[84,51,77,41],[84,52,77,42],[85,6,78,4],[85,12,78,10,"AsyncStorage"],[85,24,78,22],[85,25,78,22,"default"],[85,32,78,22],[85,33,78,23,"removeItem"],[85,43,78,33],[85,44,78,34],[85,50,78,40],[85,51,78,41],[86,6,79,4,"setToken"],[86,14,79,12],[86,15,79,13],[86,19,79,17],[86,20,79,18],[87,6,80,4,"setUser"],[87,13,80,11],[87,14,80,12],[87,18,80,16],[87,19,80,17],[88,4,81,2],[88,5,81,3],[89,4,83,2],[89,24,84,4],[89,28,84,4,"_reactJsxDevRuntime"],[89,47,84,4],[89,48,84,4,"jsxDEV"],[89,54,84,4],[89,56,84,5,"AuthContext"],[89,67,84,16],[89,68,84,17,"Provider"],[89,76,84,25],[90,6,84,26,"value"],[90,11,84,31],[90,13,84,33],[91,8,84,35,"user"],[91,12,84,39],[92,8,84,41,"token"],[92,13,84,46],[93,8,84,48,"login"],[93,13,84,53],[94,8,84,55,"logout"],[94,14,84,61],[95,8,84,63,"isLoading"],[96,6,84,73],[96,7,84,75],[97,6,84,75,"children"],[97,14,84,75],[97,16,85,7,"children"],[98,4,85,15],[99,6,85,15,"fileName"],[99,14,85,15],[99,16,85,15,"_jsxFileName"],[99,28,85,15],[100,6,85,15,"lineNumber"],[100,16,85,15],[101,6,85,15,"columnNumber"],[101,18,85,15],[102,4,85,15],[102,11,86,26],[102,12,86,27],[103,2,88,0],[103,3,88,1],[104,2,88,2,"_s"],[104,4,88,2],[104,5,32,13,"AuthProvider"],[104,17,32,66],[105,2,32,66,"_c"],[105,4,32,66],[105,7,32,13,"AuthProvider"],[105,19,32,66],[106,2,90,7],[106,8,90,13,"useAuth"],[106,15,90,20],[106,18,90,23,"useAuth"],[106,19,90,23],[106,24,90,29],[107,4,90,29,"_s2"],[107,7,90,29],[108,4,91,2],[108,10,91,8,"context"],[108,17,91,15],[108,20,91,18],[108,24,91,18,"useContext"],[108,30,91,28],[108,31,91,28,"useContext"],[108,41,91,28],[108,43,91,29,"AuthContext"],[108,54,91,40],[108,55,91,41],[109,4,92,2],[109,8,92,6],[109,9,92,7,"context"],[109,16,92,14],[109,18,92,16],[110,6,93,4],[110,12,93,10],[110,16,93,14,"Error"],[110,21,93,19],[110,22,93,20],[110,64,93,62],[110,65,93,63],[111,4,94,2],[112,4,95,2],[112,11,95,9,"context"],[112,18,95,16],[113,2,96,0],[113,3,96,1],[114,2,96,2,"_s2"],[114,5,96,2],[114,6,90,13,"useAuth"],[114,13,90,20],[115,2,90,20],[115,6,90,20,"_c"],[115,8,90,20],[116,2,90,20,"$RefreshReg$"],[116,14,90,20],[116,15,90,20,"_c"],[116,17,90,20],[117,0,90,20],[117,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","logout","useAuth"],"mappings":"AAA;qEC+B;YCK;GDE;yBEE;GFc;gBGE;GHiB;iBIE;GJK;CDO;uBME;CNM"},"hasCjsExports":false},"type":"js/module"}]}