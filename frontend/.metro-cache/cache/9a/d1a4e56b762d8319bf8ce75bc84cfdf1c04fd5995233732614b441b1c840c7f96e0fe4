{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(); // Backend URL with fallback for APK builds\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'https://resto-pos-hub-2.preview.emergentagent.com';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (phone, password) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/login`, {\n          phone,\n          password\n        });\n        const {\n          token: newToken,\n          user: newUser\n        } = response.data;\n        await AsyncStorage.default.setItem('token', newToken);\n        await AsyncStorage.default.setItem('user', JSON.stringify(newUser));\n        setToken(newToken);\n        setUser(newUser);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('token');\n      await AsyncStorage.default.removeItem('user');\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        logout,\n        isLoading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":112,"map":[[6,26,5,0],[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"value"],[8,9,5,0],[9,2,5,0],[10,2,5,0],[10,11,5,0,"_interopDefault"],[10,27,5,0,"e"],[10,28,5,0],[11,4,5,0],[11,11,5,0,"e"],[11,12,5,0],[11,16,5,0,"e"],[11,17,5,0],[11,18,5,0,"__esModule"],[11,28,5,0],[11,31,5,0,"e"],[11,32,5,0],[12,6,5,0,"default"],[12,13,5,0],[12,15,5,0,"e"],[13,4,5,0],[14,2,5,0],[15,2,27,0,"Object"],[15,8,27,0],[15,9,27,0,"defineProperty"],[15,23,27,0],[15,24,27,0,"exports"],[15,31,27,0],[16,4,27,0,"enumerable"],[16,14,27,0],[17,4,27,0,"get"],[17,7,27,0],[17,18,27,0,"get"],[17,19,27,0],[18,6,27,0],[18,13,27,0,"AuthProvider"],[18,25,27,0],[19,4,27,0],[20,2,27,0],[21,2,85,0,"Object"],[21,8,85,0],[21,9,85,0,"defineProperty"],[21,23,85,0],[21,24,85,0,"exports"],[21,31,85,0],[22,4,85,0,"enumerable"],[22,14,85,0],[23,4,85,0,"get"],[23,7,85,0],[23,18,85,0,"get"],[23,19,85,0],[24,6,85,0],[24,13,85,0,"useAuth"],[24,20,85,0],[25,4,85,0],[26,2,85,0],[27,2,91,2],[27,6,91,2,"_expoVirtualEnv"],[27,21,91,2],[27,24,91,2,"require"],[27,31,91,2],[27,32,91,2,"_dependencyMap"],[27,46,91,2],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,42,2,0],[29,45,2,0,"require"],[29,52,2,0],[29,53,2,0,"_dependencyMap"],[29,67,2,0],[30,2,2,0],[30,6,2,0,"AsyncStorage"],[30,18,2,0],[30,21,2,0,"_interopDefault"],[30,36,2,0],[30,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[30,73,2,0],[31,2,3,0],[31,6,3,0,"_axios"],[31,12,3,0],[31,15,3,0,"require"],[31,22,3,0],[31,23,3,0,"_dependencyMap"],[31,37,3,0],[32,2,3,0],[32,6,3,0,"axios"],[32,11,3,0],[32,14,3,0,"_interopDefault"],[32,29,3,0],[32,30,3,0,"_axios"],[32,36,3,0],[33,2,3,26],[33,6,3,26,"_reactJsxDevRuntime"],[33,25,3,26],[33,28,3,26,"require"],[33,35,3,26],[33,36,3,26,"_dependencyMap"],[33,50,3,26],[34,2,6,0],[34,8,6,6,"BACKEND_URL"],[34,19,6,17],[34,22,6,20,"_expoVirtualEnv"],[34,37,6,20],[34,38,6,20,"env"],[34,41,6,20],[34,42,6,20,"EXPO_PUBLIC_BACKEND_URL"],[34,65,6,20],[34,69,6,59],[34,120,6,110],[35,2,25,0],[35,8,25,6,"AuthContext"],[35,19,25,17],[35,35,25,20],[35,39,25,20,"createContext"],[35,45,25,33],[35,46,25,33,"createContext"],[35,59,25,33],[35,61,25,63,"undefined"],[35,70,25,72],[35,71,25,73],[36,2,27,7],[36,8,27,13,"AuthProvider"],[36,20,27,66],[36,23,27,69,"AuthProvider"],[36,24,27,70],[37,4,27,72,"children"],[38,2,27,81],[38,3,27,82],[38,8,27,87],[39,4,27,87,"_s"],[39,6,27,87],[40,4,28,2],[40,10,28,8],[40,11,28,9,"user"],[40,15,28,13],[40,17,28,15,"setUser"],[40,24,28,22],[40,25,28,23],[40,28,28,26],[40,32,28,26,"useState"],[40,38,28,34],[40,39,28,34,"useState"],[40,47,28,34],[40,49,28,48],[40,53,28,52],[40,54,28,53],[41,4,29,2],[41,10,29,8],[41,11,29,9,"token"],[41,16,29,14],[41,18,29,16,"setToken"],[41,26,29,24],[41,27,29,25],[41,30,29,28],[41,34,29,28,"useState"],[41,40,29,36],[41,41,29,36,"useState"],[41,49,29,36],[41,51,29,52],[41,55,29,56],[41,56,29,57],[42,4,30,2],[42,10,30,8],[42,11,30,9,"isLoading"],[42,20,30,18],[42,22,30,20,"setIsLoading"],[42,34,30,32],[42,35,30,33],[42,38,30,36],[42,42,30,36,"useState"],[42,48,30,44],[42,49,30,44,"useState"],[42,57,30,44],[42,59,30,45],[42,63,30,49],[42,64,30,50],[43,4,32,2],[43,8,32,2,"useEffect"],[43,14,32,11],[43,15,32,11,"useEffect"],[43,24,32,11],[43,26,32,12],[43,32,32,18],[44,6,33,4,"loadStoredAuth"],[44,20,33,18],[44,21,33,19],[44,22,33,20],[45,4,34,2],[45,5,34,3],[45,7,34,5],[45,9,34,7],[45,10,34,8],[46,4,36,2],[46,10,36,8,"loadStoredAuth"],[46,24,36,22],[46,27,36,25],[46,33,36,25,"loadStoredAuth"],[46,34,36,25],[46,39,36,37],[47,6,37,4],[47,10,37,8],[48,8,38,6],[48,14,38,12,"storedToken"],[48,25,38,23],[48,28,38,26],[48,34,38,32,"AsyncStorage"],[48,46,38,44],[48,47,38,44,"default"],[48,54,38,44],[48,55,38,45,"getItem"],[48,62,38,52],[48,63,38,53],[48,70,38,60],[48,71,38,61],[49,8,39,6],[49,14,39,12,"storedUser"],[49,24,39,22],[49,27,39,25],[49,33,39,31,"AsyncStorage"],[49,45,39,43],[49,46,39,43,"default"],[49,53,39,43],[49,54,39,44,"getItem"],[49,61,39,51],[49,62,39,52],[49,68,39,58],[49,69,39,59],[50,8,41,6],[50,12,41,10,"storedToken"],[50,23,41,21],[50,27,41,25,"storedUser"],[50,37,41,35],[50,39,41,37],[51,10,42,8,"setToken"],[51,18,42,16],[51,19,42,17,"storedToken"],[51,30,42,28],[51,31,42,29],[52,10,43,8,"setUser"],[52,17,43,15],[52,18,43,16,"JSON"],[52,22,43,20],[52,23,43,21,"parse"],[52,28,43,26],[52,29,43,27,"storedUser"],[52,39,43,37],[52,40,43,38],[52,41,43,39],[53,8,44,6],[54,6,45,4],[54,7,45,5],[54,8,45,6],[54,15,45,13,"error"],[54,20,45,18],[54,22,45,20],[55,8,46,6,"console"],[55,15,46,13],[55,16,46,14,"error"],[55,21,46,19],[55,22,46,20],[55,43,46,41],[55,45,46,43,"error"],[55,50,46,48],[55,51,46,49],[56,6,47,4],[56,7,47,5],[56,16,47,14],[57,8,48,6,"setIsLoading"],[57,20,48,18],[57,21,48,19],[57,26,48,24],[57,27,48,25],[58,6,49,4],[59,4,50,2],[59,5,50,3],[60,4,52,2],[60,10,52,8,"login"],[60,15,52,13],[60,18,52,16],[60,24,52,16,"login"],[60,25,52,23,"phone"],[60,30,52,36],[60,32,52,38,"password"],[60,40,52,54],[60,45,52,59],[61,6,53,4],[61,10,53,8],[62,8,54,6],[62,14,54,12,"response"],[62,22,54,20],[62,25,54,23],[62,31,54,29,"axios"],[62,36,54,34],[62,37,54,34,"default"],[62,44,54,34],[62,45,54,35,"post"],[62,49,54,39],[62,50,54,40],[62,53,54,43,"BACKEND_URL"],[62,64,54,54],[62,76,54,66],[62,78,54,68],[63,10,55,8,"phone"],[63,15,55,13],[64,10,56,8,"password"],[65,8,57,6],[65,9,57,7],[65,10,57,8],[66,8,59,6],[66,14,59,12],[67,10,59,14,"token"],[67,15,59,19],[67,17,59,21,"newToken"],[67,25,59,29],[68,10,59,31,"user"],[68,14,59,35],[68,16,59,37,"newUser"],[69,8,59,45],[69,9,59,46],[69,12,59,49,"response"],[69,20,59,57],[69,21,59,58,"data"],[69,25,59,62],[70,8,61,6],[70,14,61,12,"AsyncStorage"],[70,26,61,24],[70,27,61,24,"default"],[70,34,61,24],[70,35,61,25,"setItem"],[70,42,61,32],[70,43,61,33],[70,50,61,40],[70,52,61,42,"newToken"],[70,60,61,50],[70,61,61,51],[71,8,62,6],[71,14,62,12,"AsyncStorage"],[71,26,62,24],[71,27,62,24,"default"],[71,34,62,24],[71,35,62,25,"setItem"],[71,42,62,32],[71,43,62,33],[71,49,62,39],[71,51,62,41,"JSON"],[71,55,62,45],[71,56,62,46,"stringify"],[71,65,62,55],[71,66,62,56,"newUser"],[71,73,62,63],[71,74,62,64],[71,75,62,65],[72,8,64,6,"setToken"],[72,16,64,14],[72,17,64,15,"newToken"],[72,25,64,23],[72,26,64,24],[73,8,65,6,"setUser"],[73,15,65,13],[73,16,65,14,"newUser"],[73,23,65,21],[73,24,65,22],[74,6,66,4],[74,7,66,5],[74,8,66,6],[74,15,66,13,"error"],[74,20,66,23],[74,22,66,25],[75,8,67,6],[75,14,67,12],[75,18,67,16,"Error"],[75,23,67,21],[75,24,67,22,"error"],[75,29,67,27],[75,30,67,28,"response"],[75,38,67,36],[75,40,67,38,"data"],[75,44,67,42],[75,46,67,44,"detail"],[75,52,67,50],[75,56,67,54],[75,70,67,68],[75,71,67,69],[76,6,68,4],[77,4,69,2],[77,5,69,3],[78,4,71,2],[78,10,71,8,"logout"],[78,16,71,14],[78,19,71,17],[78,25,71,17,"logout"],[78,26,71,17],[78,31,71,29],[79,6,72,4],[79,12,72,10,"AsyncStorage"],[79,24,72,22],[79,25,72,22,"default"],[79,32,72,22],[79,33,72,23,"removeItem"],[79,43,72,33],[79,44,72,34],[79,51,72,41],[79,52,72,42],[80,6,73,4],[80,12,73,10,"AsyncStorage"],[80,24,73,22],[80,25,73,22,"default"],[80,32,73,22],[80,33,73,23,"removeItem"],[80,43,73,33],[80,44,73,34],[80,50,73,40],[80,51,73,41],[81,6,74,4,"setToken"],[81,14,74,12],[81,15,74,13],[81,19,74,17],[81,20,74,18],[82,6,75,4,"setUser"],[82,13,75,11],[82,14,75,12],[82,18,75,16],[82,19,75,17],[83,4,76,2],[83,5,76,3],[84,4,78,2],[84,24,79,4],[84,28,79,4,"_reactJsxDevRuntime"],[84,47,79,4],[84,48,79,4,"jsxDEV"],[84,54,79,4],[84,56,79,5,"AuthContext"],[84,67,79,16],[84,68,79,17,"Provider"],[84,76,79,25],[85,6,79,26,"value"],[85,11,79,31],[85,13,79,33],[86,8,79,35,"user"],[86,12,79,39],[87,8,79,41,"token"],[87,13,79,46],[88,8,79,48,"login"],[88,13,79,53],[89,8,79,55,"logout"],[89,14,79,61],[90,8,79,63,"isLoading"],[91,6,79,73],[91,7,79,75],[92,6,79,75,"children"],[92,14,79,75],[92,16,80,7,"children"],[93,4,80,15],[94,6,80,15,"fileName"],[94,14,80,15],[94,16,80,15,"_jsxFileName"],[94,28,80,15],[95,6,80,15,"lineNumber"],[95,16,80,15],[96,6,80,15,"columnNumber"],[96,18,80,15],[97,4,80,15],[97,11,81,26],[97,12,81,27],[98,2,83,0],[98,3,83,1],[99,2,83,2,"_s"],[99,4,83,2],[99,5,27,13,"AuthProvider"],[99,17,27,66],[100,2,27,66,"_c"],[100,4,27,66],[100,7,27,13,"AuthProvider"],[100,19,27,66],[101,2,85,7],[101,8,85,13,"useAuth"],[101,15,85,20],[101,18,85,23,"useAuth"],[101,19,85,23],[101,24,85,29],[102,4,85,29,"_s2"],[102,7,85,29],[103,4,86,2],[103,10,86,8,"context"],[103,17,86,15],[103,20,86,18],[103,24,86,18,"useContext"],[103,30,86,28],[103,31,86,28,"useContext"],[103,41,86,28],[103,43,86,29,"AuthContext"],[103,54,86,40],[103,55,86,41],[104,4,87,2],[104,8,87,6],[104,9,87,7,"context"],[104,16,87,14],[104,18,87,16],[105,6,88,4],[105,12,88,10],[105,16,88,14,"Error"],[105,21,88,19],[105,22,88,20],[105,64,88,62],[105,65,88,63],[106,4,89,2],[107,4,90,2],[107,11,90,9,"context"],[107,18,90,16],[108,2,91,0],[108,3,91,1],[109,2,91,2,"_s2"],[109,5,91,2],[109,6,85,13,"useAuth"],[109,13,85,20],[110,2,85,20],[110,6,85,20,"_c"],[110,8,85,20],[111,2,85,20,"$RefreshReg$"],[111,14,85,20],[111,15,85,20,"_c"],[111,17,85,20],[112,0,85,20],[112,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","logout","useAuth"],"mappings":"AAA;qEC0B;YCK;GDE;yBEE;GFc;gBGE;GHiB;iBIE;GJK;CDO;uBME;CNM"},"hasCjsExports":false},"type":"js/module"}]}